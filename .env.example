# =============================================================================
# RUKO Teams Bot Configuration
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: OpenAI Configuration
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-...
# GPT-5 models: gpt-5, gpt-5-mini, gpt-5-nano (recommended)
# Legacy models: gpt-4o, gpt-4o-mini, o1, o3-mini
OPENAI_MODEL=gpt-5-nano
REASONING_EFFORT=medium                 # minimal, low, medium, high

# -----------------------------------------------------------------------------
# REQUIRED: Microsoft Bot Framework
# -----------------------------------------------------------------------------
BOT_APP_ID=your-bot-app-id
BOT_APP_PASSWORD=your-bot-app-password
AZURE_TENANT_ID=your-azure-tenant-id    # Required for single-tenant apps

# -----------------------------------------------------------------------------
# REQUIRED: Pinecone Vector Database
# -----------------------------------------------------------------------------
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_HOST=https://your-index.pinecone.io
PINECONE_NAMESPACE=rueko-documents
PINECONE_MACHINERY_NAMESPACE=machinery-data

# -----------------------------------------------------------------------------
# REQUIRED: PostgreSQL Database (SEMA Equipment)
# -----------------------------------------------------------------------------
POSTGRES_HOST=your-postgres-host
POSTGRES_PORT=5432
POSTGRES_DB=sema
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-password

# -----------------------------------------------------------------------------
# OPTIONAL: Redis (Conversation Persistence)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379
CONVERSATION_TTL_HOURS=24

# -----------------------------------------------------------------------------
# OPTIONAL: Tavily Web Search
# -----------------------------------------------------------------------------
TAVILY_API_KEY=tvly-...
ENABLE_WEB_SEARCH=true
WEB_SEARCH_MAX_RESULTS=3

# -----------------------------------------------------------------------------
# RAG and Agent System Configuration
# -----------------------------------------------------------------------------
# Unified single-agent path (fast path, default)
USE_SINGLE_AGENT=true

# Enable/disable the custom RAG system (keep true to route through RAG layer)
USE_CUSTOM_RAG=true

# Unified agent behavior tuning (optional)
UNIFIED_AGENT_MAX_TOOL_ROUNDS=2
UNIFIED_AGENT_RETRY_ON_EMPTY=true
UNIFIED_AGENT_DEFAULT_SQL_LIMIT=200
# Force at least one internal lookup (SQL/Pinecone) before answering generally
UNIFIED_AGENT_FORCE_INTERNAL_FIRST=true
# Keep answers short
UNIFIED_AGENT_MAX_ANSWER_WORDS=120
# Extra prompt instructions appended to the unified agent system prompt
UNIFIED_AGENT_ADDITIONAL_INSTRUCTIONS=
# Conversation-aware query rewriting + multi-query retrieval (improves follow-ups + paraphrases)
UNIFIED_AGENT_ENABLE_QUERY_REWRITE=true
UNIFIED_AGENT_MULTI_QUERY_RETRIEVAL=true
UNIFIED_AGENT_MULTI_QUERY_MAX=3
UNIFIED_AGENT_REWRITE_HISTORY_TURNS=8

# -----------------------------------------------------------------------------
# Advanced Model Configuration
# -----------------------------------------------------------------------------
# Model for SQL generation and chunking (fast, non-reasoning)
# Use gpt-5-nano for best price/performance
CHUNKING_MODEL=gpt-5-nano
CHUNKING_REASONING=minimal
# Optional: override the model used for query rewriting (defaults to CHUNKING_MODEL)
QUERY_REWRITE_MODEL=
QUERY_REWRITE_REASONING=

# Embedding model for semantic search
EMBEDDING_MODEL=text-embedding-3-large

# -----------------------------------------------------------------------------
# Search Configuration
# -----------------------------------------------------------------------------
SEARCH_TOP_K=5
RERANK_TOP_N=3

# -----------------------------------------------------------------------------
# OpenAI Vector Store (Legacy - for file_search fallback)
# -----------------------------------------------------------------------------
VECTOR_STORE_ID=vs_...
