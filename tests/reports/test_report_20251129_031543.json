{
  "name": "RÜKO RAG System Tests",
  "timestamp": "2025-11-29T03:15:43.102311",
  "total_tests": 4,
  "passed": 1,
  "failed": 3,
  "score": 30.0,
  "pass_rate": "25.0%",
  "results": [
    {
      "test_id": "AGG-001",
      "category": "aggregation",
      "question": "Wie viele Bagger haben wir?",
      "passed": true,
      "score": 1.0,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort liefert eine konkrete Zahl (153) und bezieht sich explizit auf die Bagger-Kategorie über das Feld 'anzahl_bagger'. Damit erfüllt sie beide Kriterien. Es gibt keine Anzeichen für Halluzination, und die Zahl ist konsistent mit der erwarteten Form (z. B. 150+).",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": true
      },
      "execution_time_ms": 8746,
      "error": null
    },
    {
      "test_id": "AGG-002",
      "category": "aggregation",
      "question": "Was ist das Durchschnittsgewicht aller Bagger?",
      "passed": false,
      "score": 0.0,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort \"None None\" enthält keinen Zahlenwert und keine Einheit. Damit wird weder ein Gewicht angegeben noch kann die Realitätsnähe bewertet werden. Zudem wurde explizit ein Ergebnis erwartet, weshalb eine Nicht-Antwort gemäß Regel 3 als Fehlleistung gilt.",
      "criteria_results": {
        "kriterium1": false,
        "kriterium2": false
      },
      "execution_time_ms": 16787,
      "error": null
    },
    {
      "test_id": "AGG-003",
      "category": "aggregation",
      "question": "Stärkster Bagger",
      "passed": false,
      "score": 0.0,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort liefert keinerlei inhaltliche Informationen zur Frage. Weder der Maschinenname (Caterpillar 320-07C) noch die Leistung (~129 kW) werden genannt. Gemäß Regel 3 ist eine 'Keine Ergebnisse gefunden'-Antwort, obwohl erwartete Informationen vorliegen, ein Fail. Zudem wird das Kriterium ‚tatsächlich stärkster (~129 kW)‘ nicht erfüllt.",
      "criteria_results": {
        "kriterium1": false,
        "kriterium2": false
      },
      "execution_time_ms": 20209,
      "error": null
    },
    {
      "test_id": "AGG-004",
      "category": "aggregation",
      "question": "Schwerster Kettenbagger",
      "passed": false,
      "score": 0.2,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort nennt zwar einen Kettenbagger und gibt ein Gewicht an, aber sie beantwortet die Frage nicht: Gefragt war der schwerste Kettenbagger. Der Liebherr R 926 Compact (~29,3 t) ist kein Spitzenreiter beim Gewicht. Erwartet wäre z. B. der Caterpillar 6090 FS/Bucyrus RH400 mit rund 980.000 kg. Damit verfehlt die Antwort die semantische Anforderung deutlich; die genannte Zahl liegt weit außerhalb der ±10%-Toleranz des erwarteten Bereichs.",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": true
      },
      "execution_time_ms": 16497,
      "error": null
    }
  ],
  "summary": "Von 4 Tests wurde nur 1 bestanden; 3 schlugen fehl, insbesondere alle Aggregationsabfragen (Durchschnitt, stärkster/heaviest Bagger). Die durchschnittliche Punktzahl liegt bei 0,30, was auf systematische Probleme bei Aggregationen und Filterkriterien hindeutet.",
  "recommendations": [
    "Aggregation korrekt implementieren: Mittelwert, Maximum und Filter kombinieren (z. B. nur Kettenbagger) und dabei Null- bzw. fehlende Werte ausschließen.",
    "Einheitliche Datentypen sicherstellen: Gewichte/Leistungen in numerische Felder konvertieren, Einheiten normalisieren (kg/t, kW/PS) und Konsistenz prüfen.",
    "Filterlogik überprüfen: Kategorien/Tags wie 'Kettenbagger' sauber und case-insensitiv filtern; Synonyme/Mappings definieren.",
    "Gezielte Tests ergänzen: Unit- und Integrationstests für Aggregationen (inkl. Edge-Cases), z. B. leere Mengen, Ausreißer, gemischte Einheiten.",
    "Datenqualität validieren: Vor dem Aggregieren Daten bereinigen (Duplikate, inkonsistente Einträge) und Validierungsregeln in den ETL-Prozess integrieren."
  ]
}