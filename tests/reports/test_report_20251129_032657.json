{
  "name": "RÜKO RAG System Tests",
  "timestamp": "2025-11-29T03:26:57.307399",
  "total_tests": 4,
  "passed": 2,
  "failed": 2,
  "score": 69.5,
  "pass_rate": "50.0%",
  "results": [
    {
      "test_id": "AGG-001",
      "category": "aggregation",
      "question": "Wie viele Bagger haben wir?",
      "passed": false,
      "score": 0.55,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort enthält eine konkrete Zahl (153), erfüllt damit das Zahlenkriterium. Allerdings lautet die Formulierung '153 Ergebnisse' und verweist nicht explizit auf die Bagger-Kategorie. Dadurch bleibt unklar, ob es sich um die Anzahl der Bagger oder nur um Suchergebnisse handelt. Für eine klare Erfüllung hätte '153 Bagger' oder '150+ Bagger' stehen sollen.",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": false
      },
      "execution_time_ms": 8820,
      "error": null
    },
    {
      "test_id": "AGG-002",
      "category": "aggregation",
      "question": "Was ist das Durchschnittsgewicht aller Bagger?",
      "passed": true,
      "score": 0.98,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort gibt ein Durchschnittsgewicht in kg und Tonnen an (8.692 kg ≈ 8,7 t) und liegt klar im realistischen Bereich (5.000–20.000 kg). Inhaltlich korrekt und präzise. Kleiner Formalpunkt: Die Schreibweise \"8,692 kg\" kann im Deutschen als 8,692 kg missverstanden werden; die Klammerangabe (8,7 Tonnen) klärt jedoch die Intention.",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": true
      },
      "execution_time_ms": 15050,
      "error": null
    },
    {
      "test_id": "AGG-003",
      "category": "aggregation",
      "question": "Stärkster Bagger",
      "passed": true,
      "score": 1.0,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort nennt die Maschine (Caterpillar 320-07C) und gibt die Leistung in kW an (129 kW). Der Wert stimmt exakt mit der Erwartung überein und liegt damit innerhalb der Toleranz. Keine Halluzinationen, semantisch und faktisch korrekt.",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": true
      },
      "execution_time_ms": 17964,
      "error": null
    },
    {
      "test_id": "AGG-004",
      "category": "aggregation",
      "question": "Schwerster Kettenbagger",
      "passed": false,
      "score": 0.25,
      "source": "postgres",
      "query_type": "aggregation",
      "evaluation": "Die Antwort nennt zwar einen Kettenbagger und gibt ein Gewicht an, erfüllt aber die zentrale Anforderung nicht: Es wird nicht der Kettenbagger mit dem höchsten Gewicht genannt. Der Liebherr R 926 Compact (~29,3 t) ist ein Mittel-/Kompaktbagger, während die schwersten Kettenbagger in der 800–1.000+ t-Klasse liegen (z. B. Caterpillar 6090 FS ca. ~1.000 t, Liebherr R 9800 ca. ~800 t). Damit ist die Antwort semantisch nicht korrekt in Bezug auf die erwartete 'schwerste' Maschine.",
      "criteria_results": {
        "kriterium1": true,
        "kriterium2": true
      },
      "execution_time_ms": 15320,
      "error": null
    }
  ],
  "summary": "Von 4 Tests wurden 2 bestanden und 2 sind fehlgeschlagen; die durchschnittliche Punktzahl beträgt 0,70. Probleme traten insbesondere bei Aggregationen auf ([AGG-001] Stückzahl, [AGG-004] schwerstes Kettenfahrzeug), was auf Schwächen in Zähl- und Extremwertlogik hindeutet.",
  "recommendations": [
    "Überarbeiten der Aggregationslogik für Zählungen (Duplikaterkennung, Filterkriterien) und Extremwertbestimmung (max by Gewicht) inklusive robuster Null-/Fehlwertbehandlung.",
    "Einheiten- und Format-Normalisierung (z. B. kg/t, Strings zu Zahlen) vor der Berechnung sicherstellen; konsistentes Runden definieren.",
    "Gezielte Unit-Tests für Aggregationsfunktionen (Count, Max) mit Edge-Cases wie leeren Mengen, Ausreißern und widersprüchlichen Daten hinzufügen.",
    "Datenvalidierung und Logging erweitern (Warnungen bei fehlenden Gewichten oder uneinheitlichen Kategorien), um Ursachen für Fehlzählungen frühzeitig sichtbar zu machen."
  ]
}